# 5.1 레지스트리, 리포지터리, 이미지 태그 다루기

도커 이미지에는 이름이 부여되는데, 이 이름에 해당 이미지를 내려받기 위해 필요한 모든 정보가 들어 있다. 지금까지 우리가 사용했던 이미지는 `image-gallery`나 `diamol/golang` 처럼 하나 혹은 두 개의 요소로 구성되는 간단한 이름을 가졌다. 그러나 이미지의 전체 이름은(이미지 참조 라고도 부른다) 네 개의 요소로 구성된다.

<aside>
💡

docker.io/diamol/golang:latest

</aside>

# 5.3 나만의 도커 레지스트리 운영하기

로컬 네트워크에 전용 레지스크리가 있으면 편리한 점이 많다. 도커 코어 레지스트리 서버는 깃허브 저장소 `docker/distribution`에서 개발이 진행된다. 코어 레지스트리 서버는 도커 허브와 동일한 레이어 캐시 시스템을 통해 이미지를 내려받고 푸시하는 기본적인 기능을 제공한다. 그러나 도커 허브에서 볼 수 있는 웹 기반 UI 등의 기능은 빠져 있다. 코어 레지스트리 서버는 매우 가볍게 동작하는 서버로, 내가 별도로 `diamol` 계정에 패키징한 이미지를 사용해 컨테이너 형태로 직접 실행할 수 있다.

```docker
root@ip-172-31-0-13:/home/ubuntu# docker container run -d -p 5000:5000 --restart always diamol/registry
Unable to find image 'diamol/registry:latest' locally
latest: Pulling from diamol/registry
31603596830f: Pull complete 
792f5419a843: Pull complete 
3fec9ac2e0fe: Pull complete 
aea0fab1b866: Pull complete 
b72408f4bc4f: Pull complete 
6a2aeb3b52c0: Pull complete 
Digest: sha256:49c5a928c870d496013d98d4357c93f35b1896a0385ef275664bc43e69b14950
Status: Downloaded newer image for diamol/registry:latest
156ecf99c999ebba15e2ff2048d749f376a6efb4ac9f32693b0af2c7ac47b47f
```

이 명령으로 실행되는 레지스트리 서버의 기본 포트는 5000이다. 이 레지스트리 도메인 `localhost:5000`을 사용해 이미지에 태그를 부여하면 새로운 레지스트리에 이미지를 푸시할 수 있다.