FROM diamol/dotnet-aspnet

ENTRYPOINT ["dotnet", "/app/Numbers.Api.dll"]
# 이 엔드포인트의 응답은 애플리케이션 상태의 정상 여부다
# --fail 옵션을 붙이면 curl이 전달받은 상태 코드를 도커에 전달한다.
# 요청이 성공하면 0 반환, 실패하면 0 이외의 숫자를 반환한다.
HEALTHCHECK CMD curl --fail http://localhost/health

WORKDIR /app
COPY --from=builder /out/.